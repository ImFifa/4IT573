<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <title>Todo Seznam</title>
</head>

<body class='bg-gray-100 pt-[50px]'>
    <div class='max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-md'>
        <h1 class='text-3xl font-black mb-4'>Seznam todoček</h1>

        <div class="flex flex-col justify-start items-start my-6">
            <h2 class='font-semibold'>Přidat položku na seznam</h2>
            <form action="/add-todo" method="post">
                <input type="text" name="title" class='min-w-[300px] border-1 border-gray-300 rounded-md p-2 mb-4' />
                <select name="priority" class='border-1 border-gray-300 rounded-md p-2 mb-4'>
                    <option value="normal">Normální</option>
                    <option value="low">Nízká</option>
                    <option value="high">Vysoká</option>
                </select>
                <button type="submit"
                    class='rounded px-4 py-2 bg-green-600 text-white font-bold cursor-pointer'>Přidat</button>
            </form>
        </div>

        <ul class='list-none list-inside'>
            <% todos.forEach(todo=> { %>
                <li class='mb-2 p-2 border-1 border-gray-500 bg-white rounded-md'>
                    <span class="<%= 
                    todo.priority === 'high' ? 'bg-red-100 text-red-800' :
                    todo.priority === 'low' ? 'bg-yellow-100 text-yellow-800' :
                    'bg-green-100 text-green-800' %>  text-xs font-medium me-2 px-2.5 py-1 rounded-sm">
                        <%= todo.priority==='low' ? 'Nízká' : todo.priority==='medium' ? 'Střední' : 'Vysoká' %>
                    </span>
                    <a href="/todo/<%= todo.id %>"
                        class='<%= todo.done ? "text-gray-500 hover:text-gray-700 line-through" : "text-blue-500 hover:text-blue-700" %>'>
                        <%= todo.title %>
                    </a>
                    - <%= todo.done ? 'Hotovo' : 'Nedokončeno' %>
                </li>
                <% }) %>
        </ul>
    </div>
</body>

</html>